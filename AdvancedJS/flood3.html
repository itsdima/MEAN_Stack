<!DOCTYPE html>
<html>
	<head>
		<title>FloodFill</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<style>
			*{
    			margin: 0px;
    			padding: 0px;
			}
			body{
				font-family: Verdana, Geneva, Tahoma, sans-serif; 
				font-size: 0;
			}
			div.row div{
				width: 20px; 
				height: 20px;  
				display: inline-block;
			}
			#wrap{
				width: 600px;
				margin: auto;
				margin-top: 5%;
				border: 6px solid black;
			}
			#name{
				color: blue;
				font-size: 30px;
				font-style: italic;
				width: 600px;
				text-align: center;
				margin-top: 5%;
				margin: auto;
			}
			#attempts{
				color: red;
				font-size: 20px;
				font-style: italic;
				width: 600px;
				text-align: center;
				margin-top: 5%;
				margin: auto;
			}
		</style>
		<script type="text/javascript">
			$(document).ready(function(){
				var world = [
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],
				[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]

				];
				var colors = ['blue', 'red', 'yellow', 'green', 'silver', 'purple', 'green', 'orange'];
				var output = "";
				var attempts = 0;
				$('#attempts').html('<h1>Total attempts: '+attempts+'</h1>');
				for(var i = 0; i< world.length; i++){
					output += "\n<div class='row'>";
					for(var j = 0; j< world[i].length; j++){
						var random = Math.floor(Math.random() * 8);
						var randomColor = colors[random];
						var innerGrid = [];
						if(world[i][j] == 1){
							output += "\n\t<div class='box' style='background-color:"+randomColor+"';></div>";
						};
					};
					output += "\n</div>";
				};
				$('#wrap').html(output);
				$('.box').click(function(){
					attempts++
					$('#attempts').html('<h1>Total attempts: '+attempts+'</h1>');
					var NewColor = $(this).css('background-color');
					var test = document.getElementById('wrap');
					var OldColor = $(test.children[0].children[0]).css('background-color');
					function FloodFill(puzzle, start, oldColor, newColor){
  						var puzzle = puzzle; 
						var xcore = 0;
						var ycore = 0;
						var temp; 
						for(let x = 0; x < 13; x++){
							for(let y = 0; y < 30; y++){
								temp = $(puzzle.children[x].children[y]).css('background-color');
								console.log(x);
								console.log(y);
								if(temp == oldColor){
									console.log('i am here ', y);
									$(puzzle.children[x].children[y]).css('background-color', newColor);
									var stop1 = false;
									var stop2 = false;
									var check = x;
									var check2 = x;
									while(check < 12 && stop1 == false){
										if($(puzzle.children[check+1].children[y]).css('background-color') == oldColor){
											$(puzzle.children[check+1].children[y]).css('background-color', newColor);
											check++;
										}
										else{
											console.log('exiting loop');
											stop1 = true;
										}
									}
									while(check2 > 0 && stop2 == false){
										if($(puzzle.children[check2-1].children[y]).css('background-color') == oldColor){
											$(puzzle.children[check2-1].children[y]).css('background-color', newColor);
											check2--;
										}
										else{
											console.log('exiting loop 2');
											stop2 = true;
										}
									}
								}
								else if($(puzzle.children[x+1].children[0]).css('background-color') != oldColor){
									return;
								}
								else{
									break;
								}
							}
						}
    					return puzzle;
						};
  					FloodFill(test, [0 , 0], OldColor, NewColor);
    
  					});

  				});
		</script>

	</head>
	<body>
		<div id="container">
			<div id="name">
				<h1>FloodFill</h1>
			</div>
			<div id="attempts">
			</div>
			<div id="wrap">
				
			</div>
		</div>
	</body>
</html>